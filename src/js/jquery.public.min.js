(()=>{(function(t){t(function(){h(),t("input[type='number']").on("keydown",function(e){t.inArray(e.keyCode,[46,8,9,27,13,110,190])!==-1||e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()});function p(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}t(".mt_email_check span").hide(),t("#mt_email2").on("keyup",function(){let e=t("#mt_email").val(),l=t("#mt_email2").val();l.length>3?p(e)?e==l&&p(e)?(t(".mt_email_check .ok").show(),t(".mt_email_check .mismatch, .mt_email_check .notemail").hide()):(t(".mt_email_check .mismatch").show(),t(".mt_email_check .ok, .mt_email_check .notemail").hide()):(t(".mt_email_check .notemail").show(),t(".mt_email_check .ok, .mt_email_check .mismatch").hide()):t(".mt_email_check *").hide()}),t(".mt_cart button:not(.mt-plugin,.mt-gateway-selector)").on("click",function(e){t('input[name="mt_submit"]').prop("disabled",!0),t(".mt-response").html('<p class="mt-response-processing">'+mt_ajax_cart.processing+"</p>").show(),e.preventDefault();let l=t(this).attr("class"),a=t(this).attr("rel"),r=t(this).attr("data-id"),s=t(this).attr("data-type"),i=t(a+" .mt_count").val(),o=t(a+" .count").attr("data-limit"),n;if(l=="more"?n=parseInt(i)+1:l=="less"?(parseInt(i)==0&&(n=0,t(a).addClass("removed")),n=parseInt(i)-1):(n=0,t(a).addClass("removed")),0>n&&(n=0),n>o&&l=="more")t(".mt-response").html("<p>"+mt_ajax_cart.max_limit+"</p>").show(300);else{t(a+" .mt_count").val(n),t(a+" span.count").text(n);let c=0,m=0;t("td .count").each(function(){if(t(this).is(":visible")){let u=t(this).text(),f=t(this).parent("td").children(".price").text();f=f.replace(mt_ajax_cart.thousands,""),c+=parseInt(u)*parseFloat(f),m+=parseInt(u)}});let d=parseFloat(c).toFixed(2).replace("/(d)(?=(d{3})+.)/g","$1,");t(".mt_total_number").text(mt_ajax.currency+d.toString());let _={action:mt_ajax_cart.action,data:{mt_event_id:r,mt_event_tickets:n,mt_event_type:s},security:mt_ajax_cart.security};t.post(mt_ajax_cart.url,_,function(u){u.success==1?(t(".mt-response").html("<p>"+u.response+"</p>").show(300),d<0||m<=0||t('input[name="mt_submit"]').prop("disabled",!1)):t(".mt-response").html('<p class="mt-response-error">'+u.response+"</p>").show(300)},"json")}}),t(".gateway-selector button").on("click",function(e){e.preventDefault(),t(".gateway-selector li").removeClass("active"),t(this).parent("li").addClass("active"),t(".gateway-selector button").removeAttr("aria-current"),t(this).attr("aria-current","true");let l=t(this).attr("data-assign"),a=mt_ajax_cart.handling[l];t(".mt_cart_handling .price").text(a),t('input[name="mt_gateway"]').val(l)}),t(".mt_save_shipping").on("click",function(e){e.preventDefault(),t(".mt-processing").show();let l=t(".mt_street").val(),a=t(".mt_street2").val(),r=t(".mt_city").val(),s=t(".mt_state").val(),i=t(".mt_code").val(),o=t(".mt_country").val(),n={street:l,street2:a,city:r,state:s,code:i,country:o},c={action:mt_ajax.action,data:n,function:"save_address",security:mt_ajax.security};t.post(mt_ajax.url,c,function(m){let d=m.response;t(".mt-response").html("<p>"+d+"</p>").show(300)},"json"),t(".mt-processing").hide()});function h(){let e=t(".mt-order .ticket-orders");t(".mt-order .mt-ticket-field input:not([disabled])").length<1&&t('.mt-order button[name="mt_add_to_cart"]').parent("p").hide(),t(".mt-error-notice").hide(),e.on("blur",".tickets-field",function(){let a=0,r=0;t(this).val()==""&&t(this).val("0"),t(".tickets-remaining .value").each(function(){let s=parseInt(t(this).text());a=a+s}),t(".tickets_field").each(function(){if(!(t(this).attr("disabled")=="disabled")){let i=Number(t(this).val());r=r+i}}),r>a?t('button[name="mt_add_to_cart"]').addClass("mt-invalid-purchase").attr("disabled","disabled"):t('button[name="mt_add_to_cart"]').removeClass("mt-invalid-purchase").removeAttr("disabled")}),e.on("click",".mt-increment",function(){let a=t(this).parent(".mt-ticket-input").find("input"),r=parseInt(a.val()),s=parseInt(a.attr("max")),i=r+1;i<=s?a.val(i):(a.val(s),i=s),i=i.toString(),wp.a11y.speak(i,"assertive")}),e.on("click",".mt-decrement",function(){let a=t(this).parent(".mt-ticket-input").find("input"),r=parseInt(a.val()),s=parseInt(a.attr("min")),i=r-1;i>=s?a.val(i):(a.val(s),i=s),i=i.toString(),wp.a11y.speak(i,"assertive")}),e.on("click",'button[name="mt_add_to_cart"]',function(a){let r=[],s=!0;if(t(".ticket-orders *[required]").each(function(i,o){if(o.value||(s=!1,r.push(o)),o.type==="radio"){let n=!1;document.querySelectorAll(`.ticket-orders input[name=${o.name}]`).forEach(function(c){c.checked&&(n=!0)}),n||r.push(o),s=n}}),s){t(".mt-processing").show(),a.preventDefault();let i=t(this).closest(".ticket-orders").serialize(),o={action:mt_ajax.action,data:i,function:"add_to_cart",security:mt_ajax.security};t.post(mt_ajax.url,o,function(n){t("#mt-response-"+n.event_id).html("<p>"+n.response+"</p>").show(300).attr("tabindex","-1").focus(),n.success==1&&(mt_ajax.redirect=="0"?(t(".mt_qc_tickets").text(n.count),t(".mt_qc_total").text(parseFloat(n.total,10).toFixed(2).replace("/(d)(?=(d{3})+.)/g","$1,").toString())):window.location.replace(mt_ajax.cart_url))},"json"),t(".mt-processing").hide()}else{let i=t(this).parents(".mt-order").find(".mt-response"),o="";r.forEach(function(n,c){let m=n.id,d=t("label[for="+m+"]").text(),_='<li><a href="#'+m+'">'+d+"</a></li>";o+=_}),i.html("<p>"+mt_ajax.requiredFieldsText+"</p><ul>"+o+"</ul>")}})}document.addEventListener("keydown",function(e){e.ctrlKey&&e.code==="Space"&&v()}),t(".mt-extend-button").on("click",function(e){v()});function v(){t(".mt-processing").show();let e={action:mt_ajax.action,function:"extend_cart",security:mt_ajax.security};t.post(mt_ajax.url,e,function(l){let a=t("#mt-timer"),r=l.response,i=a.data("start")+300;a.data("start",i),k(a),wp.a11y.speak(r)},"json"),t(".mt-processing").hide()}t(".mt-payment-form form").on("submit",function(e){t("#mt_unsubmitted").remove()}),t(".mt-payments button").on("click",function(e){let l=t(this).attr("aria-expanded")=="true",a=t(this).next(".mt-payment-details");l?(a.hide(),t(this).attr("aria-expanded","false")):(a.show(),t(this).attr("aria-expanded","true"))}),setTimeout(function(){setInterval(function(){let e=t(".mt-expiration-update").text();wp.a11y.speak(e)},1e3*60)},1e3);let y=t("#mt-timer");y.length!==0&&setInterval(k,1e3,y);function k(e){let l=e.data("start"),a=document.querySelector(".mt_cart");if(l>0){let r=l-1;e.data("start",r);let s=new Date(null);s.setSeconds(r);let i=s.getMinutes(),o=s.getSeconds();e.html(i+" minutes "+o+" seconds")}else e.parent().html(mt_ajax.cartExpired),t(".mt-extend-button").hide(),a.parentNode.removeChild(a)}})})(jQuery);window.addEventListener("beforeunload",function(t){let p=document.getElementById("mt_unsubmitted");typeof p<"u"&&p!=null&&(t.preventDefault(),t.returnValue="")});})();
